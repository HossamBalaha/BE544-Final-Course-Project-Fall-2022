$(document).ready(function(){let a=$("#loading-blocker");a.hide();let s=null;$("#select-image-btn").off().click(function(){let l=$('<input type="file">'),t=$(this).find("img");l.change(function(){let e=l[0].files;if(e.length>0){let i=e[0];s=i;let n=new FileReader;n.onload=function(c){t.attr("src",c.target.result)},n.readAsDataURL(i)}}),l.click()}),$("#cls-inf-apply-btn").off().click(function(){a.show();let l=new FormData;l.append("selectedImageFile",s),l.append("target",$("#cls-inf-model").val()),l.append("csrf_token",CSRF_TOKEN);let t=$("#cls-inf-result");t.find("#cls-inf-result-cls").text(""),t.find("#cls-inf-result-prob").text(""),t.addClass("d-none"),$.ajax({type:"POST",url:"/api/classification/inference",data:l,processData:!1,contentType:!1,success:function(e){if(a.hide(),e.is_success){let i=$("#select-image");i.src=null,i.src=`data:image/jpeg;base64,${e.result.image}`,i.attr("src",`data:image/jpeg;base64,${e.result.image}`),t=$("#cls-inf-result"),t.find("#cls-inf-result-cls").text(e.result.class),t.find("#cls-inf-result-prob").text(e.result.probability),t.removeClass("d-none")}else Swal.fire({icon:"error",title:"Oops...",text:e.message})},error:function(e){Swal.fire({icon:"error",title:"Oops...",text:e.message})},complete:function(){a.hide()}})})});