$(document).ready(function(){let s=$("#loading-blocker");s.hide(),$("table").DataTable({bDestroy:!0,initComplete:function(t,e){$("table").wrap("<div style='overflow:auto; width:100%;position:relative;'></div>")}}).draw();let u=0,h=$("#aug-rotation-slider-span"),v=$("#aug-rotation-slider"),r=0,m=$("#aug-width-shift-slider-span"),S=$("#aug-width-shift-slider"),o=0,x=$("#aug-height-shift-slider-span"),b=$("#aug-height-shift-slider"),d=0,w=$("#aug-zoom-slider-span"),y=$("#aug-zoom-slider"),g=0,F=$("#aug-shear-slider-span"),k=$("#aug-shear-slider"),p=0,D=$("#aug-brightness-slider-span"),H=$("#aug-brightness-slider"),f=0,R=$("#aug-saturation-slider-span"),z=$("#aug-saturation-slider"),c=0,I=$("#aug-hue-slider-span"),O=$("#aug-hue-slider");v.slider({value:u,min:0,max:360,step:1,slide:function(t,e){h.text(e.value),u=e.value}}),h.text(v.slider("option","value")),S.slider({value:r,min:-1,max:1,step:.1,slide:function(t,e){m.text(e.value),r=e.value}}),m.text(S.slider("option","value")),b.slider({value:o,min:-1,max:1,step:.1,slide:function(t,e){x.text(e.value),o=e.value}}),x.text(b.slider("option","value")),y.slider({value:d,min:-1,max:1,step:.1,slide:function(t,e){w.text(e.value),d=e.value}}),w.text(y.slider("option","value")),k.slider({value:g,min:-1,max:1,step:.1,slide:function(t,e){F.text(e.value),g=e.value}}),F.text(k.slider("option","value")),H.slider({value:p,min:0,max:100,step:1,slide:function(t,e){D.text(e.value),p=e.value}}),D.text(H.slider("option","value")),z.slider({value:f,min:0,max:100,step:1,slide:function(t,e){R.text(e.value),f=e.value}}),R.text(z.slider("option","value")),O.slider({value:c,min:0,max:100,step:1,slide:function(t,e){I.text(e.value),c=e.value}}),I.text(O.slider("option","value"));let j=null;$("#select-image-btn").off().click(function(){let t=$('<input type="file">'),e=$(this).find("img");t.change(function(){let i=t[0].files;if(i.length>0){let n=i[0];j=n;let a=new FileReader;a.onload=function(l){e.attr("src",l.target.result)},a.readAsDataURL(n)}}),t.click()}),$("#aug-apply-btn").off().click(function(){s.show();let t=new FormData;t.append("selectedImageFile",j),t.append("rotation",u),t.append("widthShift",r),t.append("heightShift",o),t.append("zoom",d),t.append("shear",g),t.append("hue",c),t.append("saturation",f),t.append("brightness",p),t.append("verticalFlip",$("#aug-vertical-flip").val()),t.append("horizontalFlip",$("#aug-horizontal-flip").val()),t.append("specific",$("#aug-specific").val()),t.append("single",$("#aug-single").val()),t.append("csrf_token",CSRF_TOKEN),$.ajax({type:"POST",url:"/api/augmentation/live",data:t,processData:!1,contentType:!1,success:function(e){if(s.hide(),e.is_success){let i=$("#select-image");i.src=null,i.src=`data:image/jpeg;base64,${e.result.image}`,i.attr("src",`data:image/jpeg;base64,${e.result.image}`);let n=$("#notes-span");e.result.selection.length>0?n.text(e.result.selection+" ONLY"):n.text($("#aug-single").val()=="0"?"Single":"Multiple");let a=$("#notes-ul");a.empty();for(let l of e.result.notes)l[1]=="0"||l[1]=="0.0"||l[1]=="False"||a.append(`<li>${l[0]}: ${l[1]}</li>`);a.children().length<=0&&a.append("<li>No augmentation is applied!</li>"),$("#notes").removeClass("d-none")}else Swal.fire({icon:"error",title:"Oops...",text:e.message})},error:function(e){Swal.fire({icon:"error",title:"Oops...",text:e.message})},complete:function(){s.hide()}})})});